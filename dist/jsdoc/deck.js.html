<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: deck.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: deck.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var _ = require("lodash");
var services = require("./services");
var binder = require("./events").binder;
var Emitter = require("./events").Emitter;
var DecksEvent = require("./events").DecksEvent;
var ItemCollection = require("./itemcollection");
var Layout = require("./layout");
var Canvas = require("./canvas");
var Frame = require("./frame");
var Viewport = require("./viewport");

/**
 * Top-level API for managing the "decks.js" system.
 * Contains all of the coordinating objects for managing items, collections of items,
 * viewports, layouts, etc.
 *
 * @class
 * @mixes binder
 * @param {Object} options - Deck options
 * @param {Object} options.config - Deck configuration settings
 * @param {boolean} options.config.debugEvents - Whether to log events to the console
 * @param {boolean} options.config.debugDrawing - Whether to log drawing actions to the console
 */
function Deck(options) {
  if (!(this instanceof Deck)) { return new Deck(options); }
  if (!options) { throw new Error("options is required"); }

  this.setConfig(_.extend({}, Deck.defaultConfig, options.config));
  this.setEmitter(options.emitter || {});
  this.setAnimator(options.animator); // required
  this.setItemCollection(options.itemCollection || options.items || []);
  this.setLayout(options.layout); // required
  this.setFrame(options.frame); // required
  this.setCanvas(options.canvas || {});
  this.setViewport(options.viewport || {});

  this.bindEvents(services.emitter, Deck.emitterEvents);

  services.emitter.emit(DecksEvent("deck:ready", this));
}

/**
 * Default configuration options
 */
Deck.defaultConfig = {
  debugEvents: false,
  debugDrawing: false,
  debugGestures: false
};

/**
 * Default Emitter events to bind to
 */
Deck.emitterEvents = {
  "*": "onEmitterEvent"
};

_.extend(Deck.prototype, binder, /** @lends Deck.prototype */ {
  getItems: function() {
    return services.itemCollection.getItems();
  },

  getItem: function(id) {
    return services.itemCollection.getItem(id);
  },

  addItem: function(item, options) {
    services.itemCollection.addItem(item, options);
  },

  addItems: function(items, options) {
    services.itemCollection.addItems(items, options);
  },

  removeItem: function(item, options) {
    services.itemCollection.removeItem(item, options);
  },

  clear: function(options) {
    services.itemCollection.clear(options);
  },

  setFilter: function(filter) {
    services.itemCollection.setFilter(filter);
  },

  setSortBy: function(sortBy) {
    services.itemCollection.setSortBy(sortBy);
  },

  setReversed: function(isReversed) {
    services.itemCollection.setReversed(isReversed);
  },

  setConfig: function(config) {
    services.config = config;
  },

  setEmitter: function(emitter) {
    this.setService("emitter", emitter, Emitter);
  },

  setAnimator: function(animator) {
    this.setService("animator", animator);
  },

  setItemCollection: function(itemCollection) {
    this.setService("itemCollection", itemCollection, ItemCollection);
  },

  setLayout: function(layout) {
    this.setService("layout", layout, Layout);
  },

  setCanvas: function(canvas) {
    this.setService("canvas", canvas, Canvas);
  },

  setFrame: function(frame) {
    this.setService("frame", frame, Frame);
  },

  setViewport: function(viewport) {
    this.setService("viewport", viewport, Viewport);
  },

  setService: function(name, instanceOrOptions, Constructor) {
    if (!instanceOrOptions) { throw new Error(name + " is required"); }
    if (Constructor) {
      if (!(instanceOrOptions instanceof Constructor)) {
        instanceOrOptions = new Constructor(instanceOrOptions);
      }
    }
    services[name] = instanceOrOptions;
    services.emitter.emit(DecksEvent("deck:" + name + ":set", this, services[name]));
  },

  onEmitterEvent: function(e) {
    if (services.config.debugEvents) {
      console.log("event", e);
    }
  }
});

module.exports = Deck;

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="BasicGridLayout.html">BasicGridLayout</a></li><li><a href="BasicStackLayout.html">BasicStackLayout</a></li><li><a href="Canvas.html">Canvas</a></li><li><a href="Deck.html">Deck</a></li><li><a href="DecksEvent.html">DecksEvent</a></li><li><a href="Emitter.html">Emitter</a></li><li><a href="Frame.html">Frame</a></li><li><a href="GestureEmitter.html">GestureEmitter</a></li><li><a href="Item.html">Item</a></li><li><a href="ItemCollection.html">ItemCollection</a></li><li><a href="Layout.html">Layout</a></li><li><a href="Viewport.html">Viewport</a></li></ul><h3>Mixins</h3><ul><li><a href="binder.html">binder</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Thu Oct 16 2014 11:00:52 GMT-0600 (MDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
